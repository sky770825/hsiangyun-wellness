# 後台優化與功能擴充建議書

**對象**：身心靈瘦身教練後台（任務板／CRM／預約）  
**定位**：功能大師 × 高階設計工程師視角，依趨勢與實務提出優化方向與新功能建議。

---

## 一、排版、格式、設計與比例

### 1.1 視覺層級與節奏

| 現況 | 建議 | 理由 |
|------|------|------|
| 各頁標題皆 `text-3xl`，無主次 | 總覽用較大標（如 2.5rem），子頁用次一級（如 1.75rem），副標統一 `text-muted-foreground` + 字級 0.875rem | 建立清晰資訊階層，減少認知負擔 |
| 卡片間距 `gap-4` 一致 | 區塊間用 `space-y-6`～`space-y-8`，卡片網格用 `gap-4`～`gap-6`，重要 CTA 周圍留白稍大 | 符合 2024 後台趨勢：留白充足、可掃讀 |
| 側欄固定 14rem（w-56） | 維持，但可選：可收合側欄（icon-only）以在平板／小螢幕增加主內容寬度 | 行動與小螢幕友善 |

### 1.2 觸控與可點擊區域

- **按鈕／連結**：最小點擊區域 44×44 px（尤其「從預約轉入」「新增任務」「更新狀態」）。
- **任務卡**：整張卡可點選切換狀態，或明確的「下一階段」按鈕，避免只有小 icon 可點。
- **學員列表**：每列可點進「學員詳情」，hover 時有明確反饋（背景色或底線）。

### 1.3 色彩與狀態語意

- **預約狀態**：pending（琥珀）、contacted（藍）、confirmed（綠）、cancelled（灰），用 Badge 或左側色條統一。
- **學員狀態**：new / following / in_progress / completed / paused 用同一套語意色，總覽與 CRM 一致。
- **任務狀態**：todo / in_progress / done 三欄可用淺色背景區隔（例如淡灰 / 淡藍 / 淡綠），不搶主內容。

### 1.4 響應式與行動優先

- **總覽卡片**：lg 四欄、md 二欄、小螢幕一欄；數字與標題在窄螢幕不折行錯亂。
- **預約／學員列表**：小螢幕改為卡片堆疊，每張卡：姓名、狀態、主要動作（如「聯絡」「轉入學員」）。
- **任務板**：小螢幕可改為「清單＋篩選（依狀態）」或橫向捲動三欄，避免過度擠壓。

### 1.5 字體與可讀性

- 維持現有 font-display / font-body 區分；數據與數字可略加字重（font-medium）提升掃讀性。
- 表格或長列表使用 `text-sm`，行高至少 1.4，避免多行備註擠在一起。

---

## 二、功能上的串接或同步

### 2.1 預約 ↔ 學員 ↔ 任務 一體化

| 串接點 | 現況 | 建議 |
|--------|------|------|
| 預約 → 學員 | 手動「從預約轉入」 | 保留；可加「一鍵將本筆預約轉入並建立首次任務（例如：寄送初談表單）」減少重複操作 |
| 學員 → 任務 | 任務板可選學員 | 學員詳情頁直接「為此學員新增任務」，並可選範本（見下方 3.2） |
| 任務 → 學員 | 任務卡顯示學員名 | 學員名可點擊跳轉到 CRM 該學員（或學員詳情頁），方便從任務反查學員狀態與備註 |

### 2.2 總覽與各頁數據一致

- 總覽數字來自同一批 API（fetchBookings / fetchMembers / fetchTasks），已一致；建議加上「最後更新」時間或「手動重新整理」按鈕，讓教練確認資料是最新的。
- 若未來有「今日待辦」：可從任務的 due_date + status 計算，在總覽顯示「今日到期任務數」或「本週待聯絡學員」。

### 2.3 狀態流與通知（中長期）

- 預約「待處理」超過 24／48 小時：總覽或預約頁可標示「待優先聯絡」（不一定要推播，先視覺提醒）。
- 任務到期日已過仍「待處理」或「進行中」：任務板或總覽顯示「已逾期」標籤。
- 學員「跟進中」超過 N 天未更新備註：可選顯示「建議更新進度」提示（邏輯可後台設定開關）。

### 2.4 推播與預約／學員的同步

- 推播發送對象：可依「學員狀態」篩選（例如：僅進行中＋跟進中），或排除「已完成／暫停」。
- 預約確認信／提醒：若未來接 Email 或簡訊，可與預約狀態連動（例如：確認後自動發送「確認信」）。

---

## 三、工具上的串聯與使用

### 3.1 行事曆與預約／任務

- **Google Calendar / Outlook 同步**：預約「已確認」可寫入教練行事曆（需 OAuth 或 API），避免重複輸入。
- **任務到期日**：任務板已有 due_date；可提供「本週行事曆」檢視（按日列出預約＋任務到期），一屏掌握時間軸。

### 3.2 表單與問卷

- **初談表單／飲食紀錄表**：連結集中存在「網站設定」或「媒體庫」的「連結」區，或學員詳情「常用連結」。
- **學員填寫的表單回覆**：若有 Google Form / Typeform 等，可記錄「表單連結 + 最後填寫日」在學員欄位，方便追蹤是否已回填。

### 3.3 通訊管道集中

- **學員聯絡方式**：CRM 已有 email、phone；可擴充「Line ID」「方便聯絡時段」。
- **一鍵開啟**：在學員卡上提供「寄信」「撥號」「複製 Line」等按鈕（依欄位有值才顯示），減少切換到其他 App 的步驟。

### 3.4 媒體庫與網站

- 媒體庫接 Supabase Storage 後，上傳即寫入 `hsiangyun_media`，網站設定／前台讀取同一來源，避免多處維護。
- 若有多張「hero／profile／petal」圖，可支援「選為目前使用」一鍵切換，並在預覽區即時預覽前台效果。

---

## 四、身心靈瘦身教練專用功能建議

以下功能以「方便性、便利性、邏輯清晰、不造成困擾」為原則，且符合身心靈瘦身情境。

### 4.1 學員維度擴充（CRM 深化）

| 功能 | 說明 | 優先級 |
|------|------|--------|
| **學員詳情頁** | 單一學員的完整檢視：基本資料、狀態、進度備註、來源預約、該學員所有任務、聯絡紀錄（見下） | 高 |
| **來源預約連結** | 若學員由預約轉入，顯示「來自哪一筆預約」並可點到該預約，還原當時留言 | 高 |
| **方便聯絡時段** | 學員欄位：偏好時段（如週末上午、平日晚上），排程與提醒時可參考 | 中 |
| **Line ID / 備用聯絡** | 選填，用於一鍵複製或未來 Line 推播／提醒 | 中 |
| **標籤／分群** | 例如：產後、反覆減肥、高焦慮、朋友轉介；篩選與推播時可依標籤選人 | 中 |
| **加入日期／首次諮詢日** | 用於「跟進滿 N 天」提醒與報表 | 中 |

### 4.2 任務與教練工作流

| 功能 | 說明 | 優先級 |
|------|------|--------|
| **任務範本** | 常用任務一鍵建立：如「寄送初談表單」「安排首次諮詢」「一週飲食紀錄」「月底回顧」；選範本後只改學員與到期日 | 高 |
| **任務板拖曳** | 拖曳卡片改變狀態（todo → in_progress → done），操作更直覺 | 高 |
| **逾期標示** | due_date 已過且未完成時，卡片顯示「已逾期」或變色，總覽可顯示「逾期任務數」 | 高 |
| **任務與學員雙向連結** | 從任務點學員名→學員詳情；從學員詳情列該學員任務並可新增 | 高 |
| **子任務或檢查清單** | 一項任務內可勾選多個小步驟（如：寄表單、確認收信、提醒回填） | 低 |

### 4.3 預約流程優化

| 功能 | 說明 | 優先級 |
|------|------|--------|
| **預約列表篩選** | 依狀態（待處理／已聯絡／已確認／已取消）、日期區間篩選 | 中 |
| **預約詳情** | 點一筆預約可展開或跳詳情：完整留言、建立時間、操作紀錄（誰在何時改狀態）若未來有紀錄表 | 中 |
| **快速動作** | 列表上「聯絡」「轉入學員」「標記已確認」「取消」一鍵完成，減少進入多層畫面 | 高 |
| **今日／本週預約** | 總覽或預約頁區塊顯示「今日／本週已確認預約」若未來有預約時段欄位 | 中 |

### 4.4 進度與身心靈維度（中長期）

| 功能 | 說明 | 優先級 |
|------|------|--------|
| **進度備註範本** | 常用備註片段（如：飲食紀錄已收、本週目標、情緒較穩）可選填，加快紀錄速度 | 中 |
| **簡易情緒／狀態紀錄** | 學員維度可選「本週自評」：1～5 或選單（平穩／焦慮／低落等），不取代完整日記，僅供教練快速掌握 | 低 |
| **諮詢紀錄（session note）** | 每次諮詢可記一筆：日期、重點、下次目標；與學員綁定，方便下次前快速回顧 | 中 |
| **目標與里程碑** | 學員可設「三個月目標」「本週小目標」，任務與備註可對齊目標，方便追蹤與鼓勵 | 低 |

### 4.5 總覽與儀表板

| 功能 | 說明 | 優先級 |
|------|------|--------|
| **今日／本週焦點** | 今日到期任務、待聯絡預約、久未更新備註的學員，集中一區「建議優先處理」 | 高 |
| **簡易圖表** | 預約趨勢（本週／本月）、學員狀態圓餅圖，不需複雜報表，一眼看懂負載與轉換 | 中 |
| **快速新增** | 總覽上「新增預約」「新增學員」「新增任務」捷徑，減少切到子頁再點新增 | 中 |
| **最後更新時間** | 顯示資料最後從後端更新的時間，必要時提供「重新整理」按鈕 | 中 |

### 4.6 通知與提醒（不擾人）

| 功能 | 說明 | 優先級 |
|------|------|--------|
| **後台內提醒** | 進入後台時若有「待處理預約 > 0」或「逾期任務 > 0」，在總覽頂部輕量提示（banner 或小鈴鐺數字） | 高 |
| **Email 摘要（可選）** | 每日／每週摘要：新預約、逾期任務、建議跟進學員；由教練選擇是否開啟 | 低 |
| **推播對象篩選** | 依學員狀態、標籤篩選，避免誤發給已完成或暫停學員 | 中 |

### 4.7 設定與個人化

| 功能 | 說明 | 優先級 |
|------|------|--------|
| **任務範本管理** | 在網站設定或獨立「任務範本」頁新增／編輯範本，任務板新增時可選 | 中 |
| **狀態與標籤自訂** | 若未來希望「學員狀態」或「標籤」可自訂名稱，可放在進階設定（初期用固定選項即可） | 低 |
| **預約提醒閾值** | 設定「預約超過 N 小時未聯絡」才顯示優先提醒，避免過於敏感 | 低 |

---

## 五、實作優先順序建議（邏輯清晰、不造成困擾）

1. **第一波（體驗與流程）**  
   - 學員詳情頁（含該學員任務、來源預約連結）。  
   - 任務板拖曳改狀態、逾期標示、任務範本（至少 3～5 個固定範本）。  
   - 總覽「今日／本週焦點」區塊、後台內輕量提醒（待處理預約／逾期任務）。  
   - 預約列表快速動作（聯絡／轉入學員／確認／取消）。  
   - 按鈕與點擊區域符合 44px、狀態色彩統一。

2. **第二波（串接與效率）**  
   - CRM 學員欄位：方便聯絡時段、Line ID（選填）。  
   - 任務與學員雙向連結、從任務點學員名跳詳情。  
   - 預約篩選、媒體庫接 Supabase Storage。  
   - 總覽「最後更新」＋手動重新整理。

3. **第三波（深化與擴展）**  
   - 學員標籤／分群、諮詢紀錄（session note）。  
   - 推播對象依狀態／標籤篩選。  
   - 行事曆檢視（本週預約＋任務到期）。  
   - 進度備註範本、簡易圖表。

此順序可依人力與需求微調，但原則不變：**先讓既有流程順暢、資訊一目了然，再擴充欄位與進階功能**，避免一次改太多造成使用困擾。

---

## 六、小結

- **排版與設計**：強化層級、留白、觸控區域、狀態語意色、響應式，符合現代後台與行動使用習慣。  
- **功能串接**：預約↔學員↔任務一體化、總覽與各頁一致、狀態流與輕量提醒、推播與對象篩選。  
- **工具串聯**：行事曆同步、表單連結集中、通訊一鍵開啟、媒體庫與網站設定同一來源。  
- **身心靈瘦身專用**：學員詳情與來源預約、任務範本與拖曳、今日焦點與逾期標示、聯絡時段與 Line、標籤與諮詢紀錄、不擾人的後台提醒。

整體以「方便、便利、邏輯清晰、不造成困擾」為軸心，可依此文件分階段實作與驗收。
